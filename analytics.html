<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Analytics Dashboard - UseShield</title>
    <link rel="stylesheet" href="shared.css" />
    <style>
      body { 
        background: var(--color-bg-secondary);
        min-height: 100vh;
      }
      .container { max-width: var(--container-lg); margin: 0 auto; padding: var(--space-lg); }
      
      .back-link { 
        display: inline-flex; 
        align-items: center;
        gap: var(--space-xs);
        color: var(--color-primary); 
        text-decoration: none; 
        margin-bottom: var(--space-md); 
        font-size: var(--text-sm);
        transition: color var(--transition-fast);
      }
      .back-link:hover { text-decoration: underline; color: var(--color-primary-dark); }
      
      header { margin-bottom: var(--space-xl); display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: var(--space-md); }
      header h1 { 
        font-size: var(--text-2xl); 
        margin-bottom: var(--space-sm);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }
      header p { color: var(--color-text-muted); }
      
      .date-range { display: flex; gap: var(--space-sm); }
      .date-range button { 
        padding: var(--space-sm) var(--space-md); 
        border: 1px solid var(--color-border); 
        background: var(--color-bg); 
        border-radius: var(--radius-md); 
        font-size: var(--text-sm); 
        cursor: pointer;
        transition: all var(--transition-fast);
      }
      .date-range button:hover { border-color: var(--color-primary); }
      .date-range button.active { background: var(--color-primary); color: white; border-color: var(--color-primary); }
      
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--space-md);
        margin-bottom: var(--space-xl);
      }
      .stat-card {
        background: var(--color-bg);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        box-shadow: var(--shadow-sm);
        transition: transform var(--transition-fast), box-shadow var(--transition-fast);
      }
      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }
      .stat-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-sm); }
      .stat-card-icon { font-size: var(--text-xl); }
      .stat-card-trend { font-size: var(--text-xs); padding: 2px var(--space-sm); border-radius: var(--radius-full); }
      .stat-card-trend.up { background: var(--color-success-bg); color: var(--color-success); }
      .stat-card-trend.down { background: var(--color-danger-bg); color: var(--color-danger); }
      .stat-value { font-size: var(--text-3xl); font-weight: 700; color: var(--color-text); }
      .stat-label { font-size: var(--text-sm); color: var(--color-text-muted); margin-top: var(--space-xs); }
      
      .charts-row { display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-lg); margin-bottom: var(--space-lg); }
      @media (max-width: 800px) { .charts-row { grid-template-columns: 1fr; } }
      
      .section { 
        background: var(--color-bg); 
        border-radius: var(--radius-lg); 
        padding: var(--space-lg); 
        margin-bottom: var(--space-lg); 
        box-shadow: var(--shadow-sm); 
      }
      .section h2 { 
        font-size: var(--text-lg); 
        margin-bottom: var(--space-lg); 
        color: var(--color-text);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }
      
      .chart-container { height: 250px; position: relative; }
      .chart-placeholder { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: var(--color-text-muted); }
      .chart-placeholder .icon { font-size: 48px; margin-bottom: var(--space-md); }
      
      /* Simple bar chart */
      .bar-chart { display: flex; align-items: flex-end; justify-content: space-between; height: 200px; padding: 0 var(--space-sm); }
      .bar { flex: 1; margin: 0 var(--space-xs); background: var(--gradient-primary); border-radius: var(--radius-sm) var(--radius-sm) 0 0; position: relative; transition: height var(--transition-base); min-width: 20px; }
      .bar:hover { opacity: 0.8; }
      .bar-label { position: absolute; bottom: -24px; left: 50%; transform: translateX(-50%); font-size: var(--text-xs); color: var(--color-text-muted); white-space: nowrap; }
      .bar-value { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: var(--text-xs); font-weight: 600; }
      
      /* Pie chart (simplified as list) */
      .pie-legend { margin-top: var(--space-lg); }
      .pie-item { display: flex; align-items: center; gap: var(--space-md); padding: var(--space-sm) 0; border-bottom: 1px solid var(--color-border-light); }
      .pie-item:last-child { border-bottom: none; }
      .pie-color { width: 12px; height: 12px; border-radius: var(--radius-sm); }
      .pie-label { flex: 1; font-size: var(--text-sm); }
      .pie-value { font-weight: 600; font-size: var(--text-sm); }
      
      .data-table { width: 100%; border-collapse: collapse; }
      .data-table th, .data-table td { padding: var(--space-md); text-align: left; border-bottom: 1px solid var(--color-border); }
      .data-table th { font-size: var(--text-sm); color: var(--color-text-muted); font-weight: 600; text-transform: uppercase; }
      .data-table tr:hover { background: var(--color-bg-secondary); }
      
      .score-badge { display: inline-block; padding: var(--space-xs) var(--space-sm); border-radius: var(--radius-full); font-size: var(--text-sm); font-weight: 600; }
      .score-low { background: var(--color-success-bg); color: var(--color-success); }
      .score-medium { background: var(--color-warning-bg); color: var(--color-warning); }
      .score-high { background: var(--color-danger-bg); color: var(--color-danger); }
      
      .domain-cell { font-weight: 500; }
    </style>
  </head>
  <body>
    <div class="container">
      <a href="#" class="back-link" id="backLink">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to extension
      </a>
      
      <header>
        <div>
          <h1>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
            Analytics Dashboard
          </h1>
          <p>Track your usage and insights</p>
        </div>
        <div class="date-range">
          <button class="active" data-range="7d">7 Days</button>
          <button data-range="30d">30 Days</button>
          <button data-range="all">All Time</button>
        </div>
      </header>
      
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" aria-hidden="true">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
              </svg>
            </span>
            <span class="stat-card-trend up" id="scansTrend">+12%</span>
          </div>
          <div class="stat-value" id="totalScans">0</div>
          <div class="stat-label">Total Scans</div>
        </div>
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-warning)" stroke-width="2" aria-hidden="true">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
            </span>
          </div>
          <div class="stat-value" id="avgRiskScore">0</div>
          <div class="stat-label">Avg Risk Score</div>
        </div>
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2" aria-hidden="true">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
              </svg>
            </span>
          </div>
          <div class="stat-value" id="uniqueSites">0</div>
          <div class="stat-label">Unique Sites</div>
        </div>
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-danger)" stroke-width="2" aria-hidden="true">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
              </svg>
            </span>
          </div>
          <div class="stat-value" id="highRiskCount">0</div>
          <div class="stat-label">High Risk Found</div>
        </div>
      </div>
      
      <div class="charts-row">
        <div class="section">
          <h2>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
            Scans Over Time
          </h2>
          <div class="chart-container">
            <div class="bar-chart" id="scansChart"></div>
          </div>
        </div>
        
        <div class="section">
          <h2>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <circle cx="12" cy="12" r="10"></circle>
              <circle cx="12" cy="12" r="6"></circle>
              <circle cx="12" cy="12" r="2"></circle>
            </svg>
            Risk Distribution
          </h2>
          <div class="chart-container">
            <div id="riskDistribution"></div>
          </div>
        </div>
      </div>
      
      <div class="section">
        <h2>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            <polyline points="17 6 23 6 23 12"></polyline>
          </svg>
          Most Analyzed Sites
        </h2>
        <table class="data-table" id="topSitesTable">
          <thead>
            <tr>
              <th>Domain</th>
              <th>Scans</th>
              <th>Avg Risk</th>
              <th>Last Scanned</th>
            </tr>
          </thead>
          <tbody id="topSitesBody"></tbody>
        </table>
      </div>
      
      <div class="section">
        <h2>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          Highest Risk Sites
        </h2>
        <table class="data-table">
          <thead>
            <tr>
              <th>Domain</th>
              <th>Risk Score</th>
              <th>Top Finding</th>
              <th>Scanned</th>
            </tr>
          </thead>
          <tbody id="highRiskBody"></tbody>
        </table>
      </div>
    </div>
    
    <script src="analytics.js"></script>
  </body>
</html>
