<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Account Settings – UseShield</title>
  <link rel="stylesheet" href="shared.css" />
  <style>
    body {
      padding: var(--space-lg);
      background: var(--color-bg-secondary);
    }

    .container {
      max-width: var(--container-sm);
      margin: 0 auto;
    }

    .settings-section {
      background: var(--color-bg);
      border-radius: var(--radius-xl);
      padding: var(--space-lg);
      margin-bottom: var(--space-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--color-border-light);
    }

    .settings-section-title {
      font-size: var(--text-lg);
      font-weight: var(--font-semibold);
      margin-bottom: var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      color: var(--color-text);
    }

    .settings-section-title svg {
      color: var(--color-primary);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-md);
    }

    .form-group {
      margin-bottom: var(--space-md);
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    .form-label {
      display: block;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      margin-bottom: var(--space-xs);
      color: var(--color-text-secondary);
    }

    .form-input {
      width: 100%;
      padding: var(--space-sm) var(--space-md);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      background: var(--color-bg);
      color: var(--color-text);
      transition: all var(--transition-fast);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(30, 58, 95, 0.12);
    }

    .form-input::placeholder {
      color: var(--color-text-light);
    }

    .form-input:disabled {
      background: var(--color-bg-tertiary);
      cursor: not-allowed;
      opacity: 0.7;
    }

    .form-hint {
      font-size: var(--text-xs);
      color: var(--color-text-muted);
      margin-top: var(--space-xs);
    }

    .form-error {
      font-size: var(--text-xs);
      color: var(--color-danger);
      margin-top: var(--space-xs);
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: var(--space-sm);
      margin-top: var(--space-lg);
      padding-top: var(--space-md);
      border-top: 1px solid var(--color-border-light);
    }

    .btn-save {
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-sm) var(--space-lg);
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .btn-save:hover {
      background: var(--color-primary-dark);
    }

    .btn-save:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .btn-cancel {
      padding: var(--space-sm) var(--space-lg);
      background: var(--color-bg);
      color: var(--color-text-secondary);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .btn-cancel:hover {
      background: var(--color-bg-tertiary);
    }

    .password-toggle {
      position: relative;
    }

    .password-toggle-btn {
      position: absolute;
      right: var(--space-sm);
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      color: var(--color-text-muted);
      padding: var(--space-xs);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .password-toggle-btn:hover {
      color: var(--color-text);
    }

    .password-toggle .form-input {
      padding-right: 40px;
    }

    .danger-zone {
      border-color: var(--color-danger);
      background: var(--color-danger-bg);
    }

    .danger-zone .settings-section-title {
      color: var(--color-danger);
    }

    .danger-zone .settings-section-title svg {
      color: var(--color-danger);
    }

    .btn-danger {
      background: var(--color-danger);
      color: white;
      border: none;
    }

    .btn-danger:hover {
      background: #c62828;
    }

    /* Loading state */
    .loading-spinner-inline {
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Success message */
    .success-message {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: var(--color-success-bg);
      color: var(--color-success-text);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      margin-bottom: var(--space-md);
    }

    .error-message {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: var(--color-danger-bg);
      color: var(--color-danger);
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      margin-bottom: var(--space-md);
    }

    /* User avatar */
    .user-avatar-section {
      display: flex;
      align-items: center;
      gap: var(--space-lg);
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-lg);
      border-bottom: 1px solid var(--color-border-light);
    }

    .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: var(--radius-full);
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: var(--text-2xl);
      font-weight: var(--font-bold);
    }

    .user-info-main h2 {
      font-size: var(--text-xl);
      font-weight: var(--font-semibold);
      margin-bottom: var(--space-xs);
      color: var(--color-text);
    }

    .user-info-main p {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    .email-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      padding: 2px 8px;
      background: var(--color-success-bg);
      color: var(--color-success-text);
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      margin-left: var(--space-sm);
    }

    .email-badge.unverified {
      background: var(--color-warning-bg);
      color: var(--color-warning-text);
    }
  </style>
</head>

<body>
  <div class="container">
    <a href="#" class="back-link" id="backLink">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
      Back to extension
    </a>

    <header class="page-header">
      <h1 class="page-header-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          aria-hidden="true">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Account Settings
      </h1>
    </header>

    <!-- Profile Section -->
    <section class="settings-section" id="profileSection">
      <div class="user-avatar-section">
        <div class="user-avatar" id="userAvatar">U</div>
        <div class="user-info-main">
          <h2 id="userDisplayName">Loading...</h2>
          <p id="userEmail">
            <span id="userEmailText">loading@example.com</span>
            <span class="email-badge" id="emailBadge">
              <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              Verified
            </span>
          </p>
        </div>
      </div>

      <h3 class="settings-section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Profile Information
      </h3>

      <div id="profileMessage"></div>

      <form id="profileForm">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="firstName">First Name</label>
            <input type="text" class="form-input" id="firstName" placeholder="John" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="lastName">Last Name</label>
            <input type="text" class="form-input" id="lastName" placeholder="Doe">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="username">Username</label>
          <input type="text" class="form-input" id="username" placeholder="johndoe">
          <p class="form-hint">Your unique username for the platform.</p>
        </div>

        <div class="form-group">
          <label class="form-label" for="email">Email Address</label>
          <input type="email" class="form-input" id="email" placeholder="john@example.com" required>
          <p class="form-hint">Changing your email will require verification.</p>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-cancel" id="cancelProfileBtn">Cancel</button>
          <button type="submit" class="btn-save" id="saveProfileBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            Save Changes
          </button>
        </div>
      </form>
    </section>

    <!-- Password Section -->
    <section class="settings-section" id="passwordSection">
      <h3 class="settings-section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
        </svg>
        Change Password
      </h3>

      <div id="passwordMessage"></div>

      <form id="passwordForm">
        <div class="form-group">
          <label class="form-label" for="newPassword">New Password</label>
          <div class="password-toggle">
            <input type="password" class="form-input" id="newPassword" placeholder="••••••••" required minlength="8">
            <button type="button" class="password-toggle-btn" aria-label="Toggle password visibility">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
          <p class="form-hint">Minimum 8 characters.</p>
        </div>

        <div class="form-group">
          <label class="form-label" for="confirmPassword">Confirm New Password</label>
          <div class="password-toggle">
            <input type="password" class="form-input" id="confirmPassword" placeholder="••••••••" required minlength="8">
            <button type="button" class="password-toggle-btn" aria-label="Toggle password visibility">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-cancel" id="cancelPasswordBtn">Cancel</button>
          <button type="submit" class="btn-save" id="changePasswordBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Change Password
          </button>
        </div>
      </form>
    </section>

    <!-- Danger Zone -->
    <section class="settings-section danger-zone" id="dangerZone">
      <h3 class="settings-section-title">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
          <line x1="12" y1="9" x2="12" y2="13"></line>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
        Danger Zone
      </h3>

      <p style="font-size: var(--text-sm); color: var(--color-text-secondary); margin-bottom: var(--space-md);">
        Once you sign out, you'll need to log in again to access your account.
      </p>

      <button type="button" class="btn-save btn-danger" id="signOutBtn">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        Sign Out
      </button>
    </section>
  </div>

  <script src="src/theme.js"></script>
  <script type="module" src="account-settings.js"></script>
</body>

</html>
